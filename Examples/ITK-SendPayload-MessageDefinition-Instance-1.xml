
<MessageDefinition xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <meta>
  <profile value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageDefinition-1"/>
 </meta>
 <url value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-SendPayload-MessageDefinition-Instance-1"/>
 <identifier>
  <system value="https://tools.ietf.org/html/rfc4122"/>
  <value value="49fbdb5e-ebba-11e7-8c3f-9a214cf093ae">
  </value>
 </identifier>
 <version value="1.0.0"/>
 <title value="ITK Send Message Payload message definition"/>
 <status value="active"/>
 <date value="2017-12-28T11:30:00+00:00"/>
 <event>
  <!--any value from the code system to identify the payload-->
  <system value="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2"/>
  <code value="any from value code system"/>
  <display value="to match value from code system"/>
 </event>
 <category value="Notification"/>
 <focus>
  <code value="Bundle"/>
  <profile>
   <extension url="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-ITK-BundledAssets-1">
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="2.0.0">
      </valueString>
     </extension>
    </extension>
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Practitioner-1"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="1.0.0">
      </valueString>
     </extension>
    </extension>
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="1.0.0">
      </valueString>
     </extension>
    </extension>
    <!-- allows for any profile or profiles which make up the payload -->
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/any"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="any">
      </valueString>
     </extension>
    </extension>
   </extension>
   <extension url="utilisedExtension">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-ITK-MessageHandling-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.1.0">
     </valueString>
    </extension>
   </extension>
   <!-- to allow any extension to be used in the payload --> 
   <extension url="utilisedExtension">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <!-- to allow for any other extension used in the payload -->
   <extension url="utilisedExtension">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ValueSet/ITK-MessageEvent-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.0.0">
     </valueString>
    </extension>
   </extension>
   <!-- to allow any valueset to be used in the payload -->
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ValueSet/any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <!-- to allow snomed ct to be used in the payload -->
   <extension url="utilisedCodeSystem">
    <extension url="reference">
     <valueReference>
      <reference value="http://snomed.info/sct"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="latest release">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="2.0.0">
     </valueString>
    </extension>
   </extension>
   <!-- to allow for any code system used in payload -->
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/CodeSystem/any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <!-- to allow any concept map to be used in the payload -->
   <extension url="utilisedConceptMap">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ConceptMap/any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-Bundle-1"/>
  </profile>
 </focus>
 <allowedResponse>
  <message>
   <reference value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-BusAck-MessageDefinition-1">
   </reference>
  </message>
 </allowedResponse>
 <allowedResponse>
  <message>
   <reference value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-InfAck-MessageDefinition-1">
   </reference>
  </message>
 </allowedResponse>
 <!-- allows for other responses to the payload -->
 <allowedResponse>
  <message>
   <reference value="https://fhir.nhs.uk/STU3/MessageDefinition/any">
   </reference>
  </message>
 </allowedResponse>
</MessageDefinition>
