<?xml version="1.0" encoding="UTF-8"?>
<MessageDefinition xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../schemas/messagedefinition.xsd">
 <meta>
  <profile value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageDefinition-1"/>
 </meta>
 <url value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-BusAck-MessageDefinition-1"/>
 <identifier>
  <system value="https://tools.ietf.org/html/rfc4122"/>
  <value value="edbddc72-ab98-4c5d-ad95-168c5afa7105">
  </value>
 </identifier>
 <version value="1.0.0"/>
 <title value="ITK Business Acknowledgement Message Definition"/>
 <status value="active"/>
 <date value="2018-01-08T10:05:00+00:00"/>
 <event>
  <!--identifies the payload as ITK Business Acknowledgement-->
  <system value="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2"/>
  <code value="ITK002M"/>
  <display value="ITK Business Acknowledgement"/>
 </event>
 <category value="Notification"/>
 <focus>
  <code value="Bundle"/>
  <profile>
   <extension url="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-ITK-BundledAssets-1">
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-MessageHeader-2"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="2.0.0">
      </valueString>
     </extension>
    </extension>
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Practitioner-1"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="1.0.0">
      </valueString>
     </extension>
    </extension>
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-ITK-Header-Organization-1"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="1.0.0">
      </valueString>
     </extension>
    </extension>
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-Busack-OperationOutcome-1"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="1.0.0">
      </valueString>
     </extension>
    </extension>
    <!-- allows for any profile or profiles which make up the payload -->
    <extension url="utilisedProfile">
     <extension url="reference">
      <valueReference>
       <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/any"/>
      </valueReference>
     </extension>
     <extension url="version">
      <valueString value="any">
      </valueString>
     </extension>
    </extension>
   </extension>
   <extension url="utilisedExtension">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/Extension-ITK-MessageHandling-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.1.0">
     </valueString>
    </extension>
   </extension>
   <!--Note, any extension to be used in the payload, is not needed for the Business Acknowledgement -->
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ValueSet/ITK-MessageEvent-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.0.0">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ValueSet/ITK-MessageEvent-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.0.0">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="http://hl7.org/fhir/ValueSet/issue-severity"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="3.0.1">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="http://hl7.org/fhir/ValueSet/issue-type"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="3.0.1">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedValueSet">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ValueSet/ITK-BusAcknowledgement-1"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.0.0">
     </valueString>
    </extension>
   </extension>
   <!--Note, any valueset to be used in the payload, is not needed for the Business Acknowledgement-->
   <!-- Note, snomed ct to be used in the payload, is not needed for the Business Acknowledgement-->
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/CodeSystem/ITK-MessageEvent-2"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="2.0.0">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="http://hl7.org/fhir/issue-severity"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="3.0.1">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="http://hl7.org/fhir/issue-type"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="3.0.1">
     </valueString>
    </extension>
   </extension>
   <extension url="utilisedCodeSytem">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/CodeSystem/ITK-Acknowledgement-1"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="1.1.0">
     </valueString>
    </extension>
   </extension>
   <!--Note any code system used in payload, is not needed for the Business Acknowledgement-->
   <extension url="utilisedConceptMap">
    <extension url="reference">
     <valueReference>
      <reference value="https://fhir.nhs.uk/STU3/ConceptMap/any"/>
     </valueReference>
    </extension>
    <extension url="version">
     <valueString value="any">
     </valueString>
    </extension>
   </extension>
   <reference value="https://fhir.nhs.uk/STU3/StructureDefinition/ITK-Bundle-1"/>
  </profile>
 </focus>
 <allowedResponse>
  <message>
   <reference value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-BusAck-MessageDefinition-1">
   </reference>
  </message>
 </allowedResponse>
 <allowedResponse>
  <message>
   <reference value="https://fhir.nhs.uk/STU3/MessageDefinition/ITK-InfAck-MessageDefinition-1">
   </reference>
  </message>
 </allowedResponse>
</MessageDefinition>
